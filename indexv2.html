<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>CafeFlow — Modern Kafe Sipariş & Yönetim Sistemi (Demo)</title>
  <meta name="description" content="CafeFlow — görsel olarak zengin, tam özellikli kafe web sitesi ve çevrimiçi sipariş sistemi örneği. PWA, canlı mutfak paneli, stok takibi, kuponlar ve daha fazlası." />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* ----- Temel Değişkenler ve Reset ----- */
    :root{
      --bg:#fcfbf9; --card:#ffffff; --muted:#6b7280; --accent:#ff7a59; --accent-2:#ffcf59; --deep:#0f1724;
      --glass: rgba(255,255,255,0.7); --radius:14px; --maxw:1200px; --shadow:0 8px 30px rgba(15,23,42,0.08);
      --accent-cta: linear-gradient(90deg,#ff7a59,#ff5e99);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;background:linear-gradient(180deg,var(--bg),#f6f7f9)}
    img{max-width:100%;display:block}
    a{color:inherit}

    /* ----- Container & Layout ----- */
    .container{max-width:var(--maxw);margin:0 auto;padding:28px}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:18px 0}
    .brand{display:flex;gap:14px;align-items:center}
    .logo{width:58px;height:58px;border-radius:12px;background:var(--accent);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800;font-family:'Playfair Display',serif;font-size:20px;box-shadow:var(--shadow)}
    h1{font-family:'Playfair Display', serif;margin:0;font-weight:700}
    .tag{color:var(--muted);font-size:13px}

    /* ----- Hero ----- */
    .hero{display:grid;grid-template-columns:1fr 420px;gap:28px;align-items:center;margin:18px 0;padding:18px}
    .hero-card{background:linear-gradient(180deg,#fff,#fff);padding:26px;border-radius:18px;box-shadow:var(--shadow)}
    .hero-visual{padding:18px;border-radius:12px;background:linear-gradient(180deg,#fff7f2,#fff)}
    .kitchen-cta{display:inline-flex;gap:10px;align-items:center;padding:12px 16px;border-radius:12px;background:var(--accent-cta);color:#fff;font-weight:700;border:0;cursor:pointer}

    /* ----- Menu ----- */
    .menu-nav{display:flex;gap:12px;flex-wrap:wrap;margin:12px 0}
    .menu-nav button{background:transparent;border:1px solid rgba(12,12,12,0.06);padding:8px 12px;border-radius:10px;cursor:pointer}
    .menu-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    .product{background:var(--card);padding:14px;border-radius:12px;box-shadow:0 8px 20px rgba(12,20,30,0.06);display:flex;gap:12px}
    .p-image{width:112px;height:96px;border-radius:10px;background:linear-gradient(180deg,#fff,#fff);display:flex;align-items:center;justify-content:center}
    .p-body{flex:1}
    .p-title{display:flex;justify-content:space-between;align-items:center}
    .p-title h4{margin:0}
    .p-desc{color:var(--muted);font-size:14px;margin:8px 0}
    .price{font-weight:800;color:var(--deep)}
    .add-btn{background:var(--accent);color:#fff;padding:8px 12px;border-radius:10px;border:0;cursor:pointer}

    /* ----- Cart (sağ panel) ----- */
    .cart{position:sticky;top:24px;background:linear-gradient(180deg,#ffffff,#fff);padding:16px;border-radius:14px;box-shadow:var(--shadow);max-height:70vh;overflow:auto}
    .cart h3{margin:0 0 6px}
    .cart-list{display:flex;flex-direction:column;gap:8px;margin:12px 0}
    .cart-item{display:flex;justify-content:space-between;align-items:center;gap:12px}
    .qty{display:inline-flex;align-items:center;gap:6px}
    .qty button{border:1px solid rgba(12,12,12,0.06);background:transparent;padding:6px;border-radius:6px;cursor:pointer}
    .checkout{display:flex;gap:8px;margin-top:12px}
    .checkout .primary{flex:1;background:var(--accent);color:#fff;padding:12px;border-radius:10px;border:0;cursor:pointer}

    /* ----- Modal, badges, chips ----- */
    .badge{display:inline-block;background:var(--accent-2);padding:6px 10px;border-radius:999px;font-weight:700}
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(7,12,20,0.45);z-index:60}
    .modal .panel{background:#fff;padding:18px;border-radius:12px;max-width:720px;width:96%;box-shadow:var(--shadow)}

    /* ----- Kitchen Panel (simülasyon) ----- */
    .kitchen-panel{background:linear-gradient(180deg,#fff,#fff);padding:12px;border-radius:12px;box-shadow:var(--shadow);}
    .order-card{border-left:6px solid var(--accent);padding:10px;border-radius:8px;background:linear-gradient(180deg,#fff,#fbfbfb)}
    .order-meta{display:flex;justify-content:space-between;gap:12px}
    .status{padding:6px 10px;border-radius:999px;font-weight:700}
    .status.preparing{background:#fff3e8;color:#c75a2c}
    .status.ready{background:#e6ffef;color:#0b7a44}
    .status.completed{background:#eef2ff;color:#2446a6}

    /* ----- Footer ----- */
    footer{margin-top:28px;padding:36px 0;color:var(--muted);text-align:center}

    /* responsive */
    @media (max-width:980px){
      .hero{grid-template-columns:1fr}
      .menu-grid{grid-template-columns:repeat(2,1fr)}
      .container{padding:18px}
    }
    @media (max-width:640px){
      .menu-grid{grid-template-columns:1fr}
      header{flex-direction:column;align-items:flex-start;gap:10px}
    }

    /* görsel süslemeler */
    .splash{position:relative;border-radius:12px;overflow:hidden}
    .splash::after{content:'';position:absolute;inset:0;background:linear-gradient(120deg, rgba(255,122,89,0.06), rgba(255,207,89,0.04));pointer-events:none}

  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">CF</div>
        <div>
          <h1>CafeFlow</h1>
          <div class="tag">Online sipariş · Masa içi QR · Mutfak Paneli</div>
        </div>
      </div>
      <div style="display:flex;gap:12px;align-items:center">
        <button class="kitchen-cta" id="open-kitchen">Mutfak Paneli</button>
        <div style="text-align:right;color:var(--muted);font-size:13px">Açılış: 08:00 - Kapanış: 22:00</div>
      </div>
    </header>

    <main style="display:grid;grid-template-columns:1fr 360px;gap:20px;align-items:start">
      <section>
        <div class="hero">
          <div class="hero-card splash">
            <h2 style="margin:0 0 8px">Taze kahve, el yapımı tatlılar — Hemen sipariş verin.</h2>
            <p style="color:var(--muted);margin:0 0 16px">Evinize veya ofisinize hızlı teslimat. Masa içi sipariş için QR kod okutun ve doğrudan sipariş verin.</p>
            <div style="display:flex;gap:12px;align-items:center">
              <button class="kitchen-cta" onclick="document.getElementById('menu').scrollIntoView({behavior:'smooth'})">Menüyü Gör</button>
              <a href="#" style="color:var(--muted);text-decoration:underline">Kampanyalar</a>
            </div>
          </div>

          <aside class="hero-visual" style="border-radius:12px">
            <!-- Basit SVG görsel -->
            <svg width="100%" height="160" viewBox="0 0 800 360" preserveAspectRatio="xMidYMid slice" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <linearGradient id="g1" x1="0" x2="1">
                  <stop offset="0" stop-color="#fff7f2" />
                  <stop offset="1" stop-color="#fff" />
                </linearGradient>
              </defs>
              <rect width="100%" height="100%" fill="url(#g1)"/>
              <g transform="translate(40,40)">
                <ellipse cx="120" cy="140" rx="90" ry="50" fill="#fff3e8" />
                <rect x="40" y="40" rx="12" width="160" height="110" fill="#fff" stroke="#ffe6da"/>
                <text x="60" y="85" font-size="20" font-weight="700" fill="#c75a2c">Latte</text>
                <text x="60" y="110" font-size="12" fill="#6b7280">Sütlü, krema üstü</text>
              </g>
            </svg>
            <div style="padding:12px 0 0">
              <div style="display:flex;gap:8px;align-items:center">
                <div class="badge">%10 Hoşgeldin</div>
                <div style="color:var(--muted)">İlk siparişinize özel indirim</div>
              </div>
            </div>
          </aside>
        </div>

        <!-- Menü bölümü -->
        <section id="menu" style="margin-top:18px">
          <h3>Menü</h3>
          <div class="menu-nav" id="category-nav"></div>
          <div class="menu-grid" id="products"></div>
        </section>

        <!-- Çeşitli bilgiler -->
        <section style="margin-top:18px">
          <h3>Nasıl çalışır?</h3>
          <ol style="color:var(--muted)">
            <li>Menüden seç ve sepete ekle.</li>
            <li>Sipariş ver ve ödeme yöntemini seç.</li>
            <li>Mutfak paneli siparişi alır ve hazırlandığında bildirim alırsınız.</li>
          </ol>
        </section>
      </section>

      <!-- Sağ panel: Sepet & Hızlı bilgiler -->
      <aside>
        <div class="cart" id="cart">
          <h3>Sepetiniz</h3>
          <div id="cart-list" class="cart-list"></div>
          <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
            <div style="color:var(--muted)">Ara Toplam</div>
            <div id="subtotal" style="font-weight:800">₺0</div>
          </div>
          <div style="margin-top:12px;display:flex;gap:8px">
            <button class="primary" id="checkout-btn" style="flex:1;background:var(--accent);color:#fff;padding:12px;border-radius:10px;border:0;cursor:pointer">Ödeme & Sipariş</button>
            <button style="padding:12px;border-radius:10px;border:1px solid rgba(12,12,12,0.06);background:transparent;cursor:pointer" id="clear-cart">Temizle</button>
          </div>

          <div style="margin-top:18px;color:var(--muted);font-size:13px">
            <strong>Kampanyalar:</strong>
            <ul>
              <li>%10 ilk sipariş indirimi (kod: WELCOME10)</li>
              <li>Öğle saatlerine özel combo indirimleri</li>
            </ul>
          </div>
        </div>
      </aside>
    </main>

    <footer>
      © 2025 CafeFlow — Demo. Tasarım ve örnek sistem.
    </footer>
  </div>

  <!-- Modal: Checkout -->
  <div class="modal" id="checkout-modal" aria-hidden>
    <div class="panel">
      <h3>Siparişi Tamamla</h3>
      <form id="checkout-form">
        <div style="display:grid;grid-template-columns:1fr 220px;gap:10px;align-items:start">
          <div>
            <label style="font-weight:700">İsim</label>
            <input name="name" required placeholder="Adınız" style="width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef8;margin:6px 0" />
            <label style="font-weight:700">E-posta</label>
            <input name="email" type="email" required placeholder="you@ornek.com" style="width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef8;margin:6px 0" />
            <label style="font-weight:700">Not (tercihe bağlı)</label>
            <textarea name="note" placeholder="Alerji, masa numarası vb." style="width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef8;margin:6px 0"></textarea>
          </div>
          <div>
            <label style="font-weight:700">Ödeme Yöntemi</label>
            <select name="payment" style="width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef8;margin:6px 0">
              <option value="cash">Nakit - Kapıda</option>
              <option value="card">Kart (online)</option>
              <option value="qr">QR Kod ile Ödeme</option>
            </select>
            <label style="font-weight:700">İndirim Kodu</label>
            <input name="coupon" placeholder="Kod varsa girin" style="width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef8;margin:6px 0" />
            <div style="margin-top:12px;display:flex;gap:8px">
              <button type="submit" style="flex:1;background:var(--accent);color:#fff;padding:12px;border-radius:10px;border:0;cursor:pointer">Siparişi Onayla</button>
              <button type="button" id="cancel-checkout" style="padding:12px;border-radius:10px;border:1px solid rgba(12,12,12,0.06);background:transparent;cursor:pointer">İptal</button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal: Kitchen (simüle) -->
  <div class="modal" id="kitchen-modal" aria-hidden>
    <div class="panel" style="max-width:980px">
      <h3>Mutfak Paneli (Simülasyon)</h3>
      <p style="color:var(--muted)">Bu panel, yeni siparişlerin gerçek zamanlı olarak geldiği ve mutfak personelinin durum güncellemeleri yapabildiği demo ekranıdır.</p>
      <div style="display:flex;gap:12px;margin-top:12px">
        <div style="flex:1">
          <h4>Yeni Siparişler</h4>
          <div id="kitchen-new" style="display:flex;flex-direction:column;gap:10px"></div>
        </div>
        <div style="width:320px">
          <h4>Tamamlanan / Hazır</h4>
          <div id="kitchen-ready" style="display:flex;flex-direction:column;gap:10px"></div>
        </div>
      </div>
      <div style="margin-top:12px;text-align:right"><button id="close-kitchen" style="padding:10px 12px;border-radius:10px;border:0;background:var(--accent);color:#fff;cursor:pointer">Kapat</button></div>
    </div>
  </div>

  <script>
    /* === Demo veri: Menü, stok ve uygulama mantığı === */
    const MENU = [
      { id:'p_e_latte', title:'Latte', desc:'Sütlü espresso, köpüklü üst', price:45, category:'Kahveler', stock:50 },
      { id:'p_e_americano', title:'Americano', desc:'Sıcak filtre kahve', price:35, category:'Kahveler', stock:40 },
      { id:'p_e_capp', title:'Cappuccino', desc:'Espresso + süt köpüğü', price:48, category:'Kahveler', stock:30 },
      { id:'p_croissant', title:'Tereyağlı Kruvasan', desc:'El yapımı günlük kruvasan', price:28, category:'Tatlılar', stock:20 },
      { id:'p_cheesecake', title:'Cheesecake', desc:'Kremalı, mevsim meyveli', price:34, category:'Tatlılar', stock:10 },
      { id:'p_sandwich', title:'Izgara Sandviç', desc:'Peynir, domates, roka', price:42, category:'Atıştırmalıklar', stock:15 },
      { id:'p_icedlatte', title:'Iced Latte', desc:'Soğuk süt + espresso', price:50, category:'Soğuk İçecekler', stock:25 },
      { id:'p_tea', title:'Yeşil Çay', desc:'Organik filtre çay', price:22, category:'Sıcak İçecekler', stock:40 }
    ];

    /* Basit uygulama durumu */
    let categories = [...new Set(MENU.map(m=>m.category))];
    let cart = JSON.parse(localStorage.getItem('cf_cart')||'{}'); // {productId: qty}
    let orders = JSON.parse(localStorage.getItem('cf_orders')||'[]');

    /* BroadcastChannel ile aynı tarayıcıda mutfak simülasyonu (gerçek zamanlı) */
    const channel = ('BroadcastChannel' in window) ? new BroadcastChannel('cafeflow-orders') : null;

    /* DOM referansları */
    const productsEl = document.getElementById('products');
    const catNav = document.getElementById('category-nav');
    const cartList = document.getElementById('cart-list');
    const subtotalEl = document.getElementById('subtotal');
    const checkoutBtn = document.getElementById('checkout-btn');
    const checkoutModal = document.getElementById('checkout-modal');
    const checkoutForm = document.getElementById('checkout-form');
    const cancelCheckout = document.getElementById('cancel-checkout');
    const openKitchenBtn = document.getElementById('open-kitchen');
    const kitchenModal = document.getElementById('kitchen-modal');
    const closeKitchen = document.getElementById('close-kitchen');
    const kitchenNew = document.getElementById('kitchen-new');
    const kitchenReady = document.getElementById('kitchen-ready');

    /* Başlangıç render */
    function init(){
      renderCategories();
      renderProducts();
      renderCart();
      renderKitchen();
    }

    function renderCategories(){
      catNav.innerHTML = '';
      const allBtn = document.createElement('button'); allBtn.textContent='Tümü'; allBtn.onclick=()=>renderProducts(); catNav.appendChild(allBtn);
      categories.forEach(c=>{
        const b=document.createElement('button'); b.textContent=c; b.onclick=()=>renderProducts(c); catNav.appendChild(b);
      });
    }

    function renderProducts(filter=null){
      productsEl.innerHTML='';
      const list = filter ? MENU.filter(m=>m.category===filter) : MENU;
      list.forEach(p=>{
        const el = document.createElement('div'); el.className='product';
        el.innerHTML = `
          <div class="p-image">
            <!-- basit SVG placeholder -->
            <svg width="100%" height="80" viewBox="0 0 160 120" xmlns="http://www.w3.org/2000/svg">
              <rect x="0" y="0" width="160" height="120" rx="10" fill="#fff7f2"/>
              <text x="14" y="46" font-size="18" font-weight="700" fill="#c75a2c">${p.title}</text>
              <text x="14" y="70" font-size="10" fill="#6b7280">${p.desc}</text>
            </svg>
          </div>
          <div class="p-body">
            <div class="p-title"><h4>${p.title}</h4><div class="price">₺${p.price}</div></div>
            <div class="p-desc">${p.desc}</div>
            <div style="display:flex;gap:8px;align-items:center;margin-top:8px">
              <button class="add-btn" data-id="${p.id}">Sepete Ekle</button>
              <div style="color:var(--muted);font-size:13px">Stok: ${p.stock}</div>
            </div>
          </div>
        `;
        productsEl.appendChild(el);
      });
      // Add event listeners for add buttons
      document.querySelectorAll('.add-btn').forEach(b=>b.addEventListener('click', ()=>{
        const id=b.getAttribute('data-id'); addToCart(id);
      }));
    }

    function addToCart(productId, qty=1){
      const product = MENU.find(m=>m.id===productId);
      if(!product) return alert('Ürün bulunamadı');
      const current = cart[productId]||0;
      if(current+qty > product.stock) return alert('Yeterli stok yok');
      cart[productId] = current+qty;
      saveCart(); renderCart();
    }

    function saveCart(){ localStorage.setItem('cf_cart', JSON.stringify(cart)); }

    function renderCart(){
      cartList.innerHTML='';
      let subtotal = 0;
      Object.keys(cart).forEach(id=>{
        const p = MENU.find(m=>m.id===id);
        const qty = cart[id];
        const item = document.createElement('div'); item.className='cart-item';
        item.innerHTML = `
          <div style="flex:1">
            <div style="font-weight:700">${p.title}</div>
            <div style="color:var(--muted);font-size:13px">₺${p.price} x ${qty}</div>
          </div>
          <div style="display:flex;align-items:center;gap:8px">
            <div class="qty">
              <button data-id="${id}" class="dec">-</button>
              <div style="min-width:22px;text-align:center">${qty}</div>
              <button data-id="${id}" class="inc">+</button>
            </div>
            <div style="font-weight:700">₺${p.price*qty}</div>
          </div>
        `;
        cartList.appendChild(item);
      subtotal += p.price*cart[id];
      });
      subtotalEl.textContent = `₺${subtotal}`;
      // quantity buttons
      document.querySelectorAll('.dec').forEach(b=>b.addEventListener('click', ()=>{
        const id=b.getAttribute('data-id'); if(cart[id]>1) cart[id]--; else delete cart[id]; saveCart(); renderCart();
      }));
      document.querySelectorAll('.inc').forEach(b=>b.addEventListener('click', ()=>{
        const id=b.getAttribute('data-id'); addToCart(id,1);
      }));
    }

    document.getElementById('clear-cart').addEventListener('click', ()=>{ cart={}; saveCart(); renderCart(); });

    // Checkout flow
    checkoutBtn.addEventListener('click', ()=>{
      if(Object.keys(cart).length===0) return alert('Sepetiniz boş');
      checkoutModal.style.display='flex'; checkoutModal.setAttribute('aria-hidden','false');
    });
    cancelCheckout.addEventListener('click', ()=>{ checkoutModal.style.display='none'; checkoutModal.setAttribute('aria-hidden','true'); });

    checkoutForm.addEventListener('submit', (e)=>{
      e.preventDefault();
      const formData = Object.fromEntries(new FormData(checkoutForm).entries());
      // Basit kupon uygulama
      let subtotal = 0; Object.keys(cart).forEach(id=>{ const p=MENU.find(x=>x.id===id); subtotal += p.price*cart[id]; });
      let discount = 0;
      if(formData.coupon && formData.coupon.trim().toUpperCase()==='WELCOME10') discount = Math.round(subtotal*0.1);
      const total = subtotal - discount;
      // Sipariş oluştur
      const order = {
        id: 'ord_'+Date.now(),
        customer: { name: formData.name, email: formData.email },
        items: Object.keys(cart).map(id=>{ const p=MENU.find(x=>x.id===id); return {productId:id, name:p.title, qty:cart[id], price:p.price}; }),
        note: formData.note || '',
        total, discount, payment: formData.payment, status:'new', createdAt: new Date().toISOString()
      };
      // Stok azalt
      order.items.forEach(it=>{ const p=MENU.find(x=>x.id===it.productId); p.stock -= it.qty; if(p.stock<0) p.stock=0; });
      orders.push(order); localStorage.setItem('cf_orders', JSON.stringify(orders));
      // Clear cart
      cart={}; saveCart(); renderCart(); renderProducts();
      // Broadcast order to kitchen
      if(channel) channel.postMessage({type:'new-order', order});
      else console.info('New order:',order);
      checkoutModal.style.display='none'; checkoutModal.setAttribute('aria-hidden','true');
      alert('Siparişiniz alındı! Sipariş numaranız: '+order.id);
      renderKitchen();
    });

    /* Kitchen rendering & actions */
    function renderKitchen(){
      // yükle güncel orders
      orders = JSON.parse(localStorage.getItem('cf_orders')||'[]');
      kitchenNew.innerHTML=''; kitchenReady.innerHTML='';
      orders.filter(o=>o.status==='new' || o.status==='preparing').forEach(o=>{
        const oc = orderCard(o);
        kitchenNew.appendChild(oc);
      });
      orders.filter(o=>o.status==='ready' || o.status==='completed').forEach(o=>{
        const oc = orderCard(o);
        kitchenReady.appendChild(oc);
      });
    }

    function orderCard(o){
      const div = document.createElement('div'); div.className='order-card';
      div.innerHTML = `
        <div class="order-meta"><div><strong>#${o.id}</strong><div style="color:var(--muted);font-size:13px">${o.customer.name}</div></div><div>${new Date(o.createdAt).toLocaleTimeString()}</div></div>
        <div style="margin-top:8px">${o.items.map(i=>`<div style=\"display:flex;justify-content:space-between;\">${i.name} x ${i.qty} <strong>₺${i.price*i.qty}</strong></div>`).join('')}</div>
        <div style="margin-top:8px;display:flex;gap:8px;align-items:center;justify-content:space-between">
          <div style="color:var(--muted)">Toplam: <strong>₺${o.total}</strong></div>
          <div style="display:flex;gap:8px;align-items:center">
            <div class="status ${o.status==='new' || o.status==='preparing'? 'preparing' : o.status==='ready' ? 'ready' : 'completed'}">${o.status}</div>
            ${o.status!=='ready' ? `<button data-id="${o.id}" class="mark-ready" style="padding:8px;border-radius:8px;border:0;background:#0b7a44;color:#fff;cursor:pointer">Hazır</button>` : `<button data-id="${o.id}" class="mark-complete" style="padding:8px;border-radius:8px;border:0;background:#2446a6;color:#fff;cursor:pointer">Teslim</button>`}
          </div>
        </div>
      `;
      // event listeners
      setTimeout(()=>{
        const readyBtn = div.querySelector('.mark-ready'); if(readyBtn){ readyBtn.addEventListener('click', ()=>{ updateOrderStatus(o.id,'ready'); }); }
        const compBtn = div.querySelector('.mark-complete'); if(compBtn){ compBtn.addEventListener('click', ()=>{ updateOrderStatus(o.id,'completed'); }); }
      },10);
      return div;
    }

    function updateOrderStatus(id,status){
      orders = orders.map(o=> o.id===id ? {...o,status} : o );
      localStorage.setItem('cf_orders', JSON.stringify(orders));
      if(channel) channel.postMessage({type:'order-updated', id, status});
      renderKitchen();
    }

    // BroadcastChannel dinle
    if(channel){
      channel.onmessage = (ev)=>{
        const msg = ev.data;
        if(msg.type==='new-order' || msg.type==='order-updated') renderKitchen();
      }
    }

    // Kitchen modal controls
    openKitchenBtn.addEventListener('click', ()=>{ kitchenModal.style.display='flex'; kitchenModal.setAttribute('aria-hidden','false'); renderKitchen(); });
    closeKitchen.addEventListener('click', ()=>{ kitchenModal.style.display='none'; kitchenModal.setAttribute('aria-hidden','true'); });

    // init
    init();

    /* Accessibility & small UX touches */
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape'){ document.querySelectorAll('.modal').forEach(m=>{ m.style.display='none'; m.setAttribute('aria-hidden','true'); }); } });

    // demo: sipariş listesini konsolda izleme
    window._CafeFlow = { MENU, getCart:()=>cart, getOrders:()=>orders, updateOrderStatus };
  </script>

  <!-- NOTLAR: Bu dosya demo amaçlı tek dosyalık frontend uygulamasıdır. Gerçek üretim için:
    - Backend (API) oluşturun: siparişler, kullanıcılar, ödeme, stok yönetimi
    - Güvenli ödeme entegrasyonları (Stripe/iyzico)
    - Gerçek zamanlı bildirimler için WebSocket veya Pusher kullanın
    - Veritabanı: PostgreSQL + Redis köprüleri
    - Sunucu tarafı doğrulamalarını ekleyin
  -->
</body>
</html>

<style>
/* === DARK THEME – PREMIUM CAFE UI === */
:root{
  --bg:#0d1117;
  --card:#161b22;
  --text:#c9d1d9;
  --muted:#8b949e;
  --accent:#58a6ff;
  --accent2:#1f6feb;
  --radius:14px;
  --glass:rgba(22,27,34,0.55);
  --shadow:0 8px 20px rgba(0,0,0,0.35);
  --blur:blur(14px);
}
body{
  background:var(--bg);
  color:var(--text);
  font-family:'Inter',sans-serif;
  margin:0;
  padding:0;
}
header{
  background:rgba(22,27,34,0.9);
  backdrop-filter:var(--blur);
  box-shadow:var(--shadow);
  border-bottom:1px solid #21262d;
}
.card{
  background:var(--card);
  border:1px solid #21262d;
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  transition:0.25s ease;
}
.card:hover{
  transform:translateY(-4px);
  border-color:var(--accent);
}
button, .btn{
  background:var(--accent2);
  color:white;
  border:none;
  border-radius:var(--radius);
  padding:10px 18px;
  cursor:pointer;
  transition:0.2s;
  font-weight:600;
}
button:hover{
  background:var(--accent);
  transform:scale(1.03);
}
nav a{
  color:var(--text);
  text-decoration:none;
  padding:10px 14px;
  border-radius:var(--radius);
  transition:0.2s;
}
nav a:hover{
  background:#21262d;
  color:var(--accent);
}
.modal{
  background:var(--card);
  border:1px solid #30363d;
  border-radius:var(--radius);
  padding:20px;
  box-shadow:var(--shadow);
}
input,select,textarea{
  background:#0f141a;
  border:1px solid #30363d;
  color:var(--text);
  border-radius:var(--radius);
  padding:10px;
}
input:focus,textarea:focus{
  border-color:var(--accent);
  outline:none;
}
.menu-category-title{
  color:white;
  font-size:1.8rem;
  border-left:4px solid var(--accent);
  padding-left:10px;
}
/* Glow hover effects for product images */
.product img{
  border-radius:var(--radius);
  transition:0.25s;
}
.product:hover img{
  filter:brightness(1.15);
  box-shadow:0 0 18px rgba(88,166,255,0.35);
}
</style>

